<!DOCTYPE html>
<html lang="zh-Hans">
<head>

    <!-- hexo-inject:begin --><!-- hexo-inject:end --><!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="焦迪" />



<meta name="description" content="&amp;emsp;本文介绍Allegro中差分线与等长线的设置方法。">
<meta property="og:type" content="article">
<meta property="og:title" content="Allegro学习笔记-差分线与等长线">
<meta property="og:url" content="http://jiaodi.tech/2017/07/09/allegro-guide-2/index.html">
<meta property="og:site_name" content="焦迪的博客">
<meta property="og:description" content="&amp;emsp;本文介绍Allegro中差分线与等长线的设置方法。">
<meta property="og:image" content="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-200.png">
<meta property="og:image" content="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-202.png">
<meta property="og:image" content="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-203.png">
<meta property="og:image" content="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-204.png">
<meta property="og:image" content="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-205.png">
<meta property="og:image" content="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-206.png">
<meta property="og:image" content="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-207.png">
<meta property="og:image" content="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-208.png">
<meta property="og:image" content="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-209.png">
<meta property="og:image" content="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-210.png">
<meta property="og:image" content="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-211.png">
<meta property="og:image" content="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-212.png">
<meta property="og:image" content="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-213.png">
<meta property="og:image" content="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-214.png">
<meta property="og:image" content="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-215.jpg">
<meta property="og:image" content="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-215.png">
<meta property="og:image" content="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-216.png">
<meta property="og:image" content="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-217.png">
<meta property="og:image" content="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-218.png">
<meta property="og:image" content="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-219.png">
<meta property="og:image" content="http://omcg8fk23.bkt.clouddn.com/Reward.jpg">
<meta property="og:updated_time" content="2018-03-15T13:46:45.391Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Allegro学习笔记-差分线与等长线">
<meta name="twitter:description" content="&amp;emsp;本文介绍Allegro中差分线与等长线的设置方法。">
<meta name="twitter:image" content="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-200.png">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="焦迪的博客" type="application/atom+xml">



    <link rel="shortcut icon" href="http://omcg8fk23.bkt.clouddn.com/Jay.jpg">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>Allegro学习笔记-差分线与等长线 | 焦迪的博客</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: undefined
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->






</head>
<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="http://omcg8fk23.bkt.clouddn.com/Jay.jpg" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">焦迪</a></h1>
        </hgroup>

        
        <p class="header-subtitle">Shape of my heart.</p>
        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:nemojiao@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="https://github.com/nemoj" title="GitHub"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/802-11/">802.11</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AD7616/">AD7616</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Allegro/">Allegro</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Buck/">Buck</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C#</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C2000/">C2000</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CCS/">CCS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cadence/">Cadence</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DCDC/">DCDC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DMA/">DMA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DSP/">DSP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/F28379D/">F28379D</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FMC/">FMC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Flash/">Flash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GPIO/">GPIO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HDC1010/">HDC1010</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/I2C/">I2C</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IWDG/">IWDG</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Keil/">Keil</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MAC/">MAC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MLCC/">MLCC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MPU/">MPU</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Markdown/">Markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Noise/">Noise</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PCB/">PCB</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHY/">PHY</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PWM/">PWM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pierce/">Pierce</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PyInstaller/">PyInstaller</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/QUADSPI/">QUADSPI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RTC/">RTC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SDRAM/">SDRAM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/STM32CubeMX/">STM32CubeMX</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/STM32F7/">STM32F7</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sensor/">Sensor</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Systick/">Systick</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Timer/">Timer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UART/">UART</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WWDG/">WWDG</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/XDS100/">XDS100</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/crystal/">crystal</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/interrupt/">interrupt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oscillator/">oscillator</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/serial/">serial</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/串口/">串口</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前馈电容/">前馈电容</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/动态响应/">动态响应</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/封装/">封装</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/差分线/">差分线</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/等长线/">等长线</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/高速电路/">高速电路</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="http://zhangxb.tech/">张晓斌</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://gaomf.cn/">高明飞</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://tongzai.tech/">桐仔</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">雨下整夜，此刻初晴.</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">焦迪</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="http://omcg8fk23.bkt.clouddn.com/Jay.jpg" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">焦迪</a></h1>
            </hgroup>
            
            <p class="header-subtitle">Shape of my heart.</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:nemojiao@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/nemoj" title="GitHub"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap"><article id="post-allegro-guide-2" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/07/09/allegro-guide-2/" class="article-date">
      <time datetime="2017-07-09T04:30:00.000Z" itemprop="datePublished">2017-07-09</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Allegro学习笔记-差分线与等长线
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/EDA/">EDA</a>
    </div>


        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Allegro/">Allegro</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Cadence/">Cadence</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/差分线/">差分线</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/等长线/">等长线</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/高速电路/">高速电路</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>&emsp;本文介绍Allegro中差分线与等长线的设置方法。</p>
<a id="more"></a>
<h2 id="Xnet的设置"><a href="#Xnet的设置" class="headerlink" title="Xnet的设置"></a>Xnet的设置</h2><p>&emsp;实际的电路设计中，差分线与等长线之间往往串接一个电阻用于匹配，或者说用于调节信号强度而减弱振铃效应。而差分线或者等长线设置中，均只能针对同一网络进行设置。由于串联电阻之后，电阻两端的网络已经不再是同一个网络，而无法按照单一网络进行差分或者等长控制。<br>&emsp;Allegro中通过Xnet解决这一问题。Xnet即为拓展网络（Extended net）：连续的由被动元件连接的net组与被动元件共同构成Xnet，其中被动原件通常为电阻。这里给出Allegro官方的定义：</p>
<blockquote>
<p>An Xnet is a connection between drivers and receivers. An Xnet includes all the drivers and receivers connected to each other plus any discrete components that are connected to the Xnet. Xnets pass through devices such as resistors and capacitors as shown in the following figure.</p>
</blockquote>
<div align="center"><br><img src="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-200.png" alt=""><br></div><br>&emsp;接上一篇文章中基本的原理图与PCB规则设置所述，这里举例将DAC串接电阻的输出网络设置为Xnet。具体步骤如下。<br><div align="center"><br><img src="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-202.png" alt=""><br></div><br>&emsp;打开Allegro，明确需要设置的Xnet，这里将R1以及两端网络设置为Xnet。<br><div align="center"><br><img src="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-203.png" alt=""><br></div>

<p>&emsp;选择菜单栏Analyze-Model Assignment，打开SI Design Audit，选择OK忽略现有的Audit Errors。</p>
<div align="center"><br><img src="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-204.png" alt=""><br></div><br>&emsp;选择R1，点击Create Model。<br><div align="center"><br><img src="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-205.png" alt=""><br></div><br>&emsp;选择Create ESpiceDevice model，点击OK。<br><div align="center"><br><img src="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-206.png" alt=""><br></div><br>&emsp;在Create ESpiceDevice Model设置中，Single Pins中每两个pin连接的网络与元件本身构成一个Xnet。如果器件为排阻等按照两两对应设置Xnet。确认无误后点击OK。<br><div align="center"><br><img src="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-207.png" alt=""><br></div><br>&emsp;之后弹出Signal Model Assigment Changes提示框。<br><div align="center"><br><img src="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-208.png" alt=""><br></div><br>&emsp;至此，R1连接的Xnet设置完毕。同理设置R2相关网络。可以打开Constraint Manager查看已经设置好的Xnet。<br><div align="center"><br><img src="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-209.png" alt=""><br></div>

<h2 id="差分线的设置"><a href="#差分线的设置" class="headerlink" title="差分线的设置"></a>差分线的设置</h2><h3 id="差分线的定义"><a href="#差分线的定义" class="headerlink" title="差分线的定义"></a>差分线的定义</h3><p>&emsp;维基百科中关于差分线的定义如下：</p>
<blockquote>
<p>差分传输是一种信号传输的技术，区别于传统的一根信号线一根地线的做法，差分传输在这两根线上都传输信号，这两个信号的振幅相同，相位相反。在这两根线上的传输的信号就是差分信号。信号接收端比较这两个电压的差值来判断发送端发送的是逻辑0还是逻辑1。在电路板上，差分走线必须是等长、等宽、紧密靠近、且在同一层面的两根线。</p>
</blockquote>
<h3 id="差分线对的设置"><a href="#差分线对的设置" class="headerlink" title="差分线对的设置"></a>差分线对的设置</h3><p>&emsp;打开Constraint Manager，选择Physical-Net-All Layers；选中需要设置为差分线对的2个网络，这里选择VOUTA与VOUTB网络。</p>
<div align="center"><br><img src="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-210.png" alt=""><br></div><br>&emsp;右键，选择Create-Differential Pair，此时可以编辑差分线对名字，之后点击Create即可。至此，差分线对设置完毕。<br><div align="center"><br><img src="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-211.png" alt=""><br></div>

<h3 id="差分线的规则设置"><a href="#差分线的规则设置" class="headerlink" title="差分线的规则设置"></a>差分线的规则设置</h3><p>&emsp;打开Constraint Manager，选择Electrical Constraint Set-Routing-Differential Pair；选择Objects-Create-Electrical CSet，输入规则约束名字DIFF，点击OK确认。可以看到所有的规则设置项如下所示。</p>
<div align="center"><br><img src="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-212.png" alt=""><br></div>

<h4 id="Coupling-Parameters"><a href="#Coupling-Parameters" class="headerlink" title="Coupling Parameters"></a>Coupling Parameters</h4><p>&emsp;在Allegro中，最基本的差分线设置为Coupling Parameters设置，示意图如下。</p>
<div align="center"><br><img src="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-213.png" alt=""><br></div>

<p>&emsp;其中Primary设置为典型情况下差分线的线宽与线距设置，Neck设置为布局受限情况下差分线的线宽与线距设置。具体设置参数需要按照阻抗规则、PCB加工能力等具体分析。</p>
<h4 id="Uncoupled-Length"><a href="#Uncoupled-Length" class="headerlink" title="Uncoupled Length"></a>Uncoupled Length</h4><p>&emsp;Uncoupled Length用于约束差分线的不匹配长度，例如差分线引线处可能存在不耦合的情况。可以通过使能Gather Control，设置Max值设置不耦合长度的最大允许值。</p>
<div align="center"><br><img src="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-214.png" alt=""><br></div>

<h4 id="Static-Phase"><a href="#Static-Phase" class="headerlink" title="Static Phase"></a>Static Phase</h4><p>&emsp;Cadence<a href="https://community.cadence.com/cadence_blogs_8/b/pcb/archive/2010/11/03/what-s-good-about-differential-impedance-in-constraint-manager-see-for-yourself-in-spb16-3" target="_blank" rel="external">官方论坛</a>中对Static Phase Tolerance做出的解释如下：</p>
<blockquote>
<p>a one time check from Driver to Receiver comparing lengths or delay of each member. If a Driver cannot be determined, the check is performed across the longest path of the pair. </p>
</blockquote>
<p>&emsp;即Static Phase为静态相位检查，一次性检测整个差分线对的长度或者延时误差，是对差分线对的整体误差控制。</p>
<h4 id="Dynamic-Phase"><a href="#Dynamic-Phase" class="headerlink" title="Dynamic Phase"></a>Dynamic Phase</h4><p>&emsp;Cadence<a href="https://community.cadence.com/cadence_blogs_8/b/pcb/archive/2010/11/03/what-s-good-about-differential-impedance-in-constraint-manager-see-for-yourself-in-spb16-3" target="_blank" rel="external">官方论坛</a>中对Dynamic Phase Tolerance做出的解释如下：</p>
<blockquote>
<p>Etch length of each member is compared at each bend point interval across the Driver-Receiver path of the Diff Pair. Etch length is always measured back to the Driver pins.</p>
</blockquote>
<p>&emsp;即Dynamic Phase为动态相位检查，将对差分线对的每一个转角处进行误差检查，控制每一个转角处相对于驱动端的长度或者延时误差。</p>
<p>&emsp;Cadence<a href="https://community.cadence.com/cadence_blogs_8/b/pcb/archive/2010/11/03/what-s-good-about-differential-impedance-in-constraint-manager-see-for-yourself-in-spb16-3" target="_blank" rel="external">官方论坛</a>中对Dynamic Phase Max Length做出的解释如下：</p>
<blockquote>
<p>When specified, the Diff Pair is permitted to exceed the phase tolerance constraint for a contiguous etch length of less than or equal to the value of Max Length specified. If no compensation is made within this specified distance, a DRC will be reported at the point where the Diff Pair first goes out of phase.</p>
</blockquote>
<p>&emsp;Dynamic Phase Max Length的具体意义为：在Dynamic Phase Max Length范围以内，差分线的误差可以超过Tolerance。但如果在Dynamic Phase Max Length规定的长度内仍然未能将误差补偿，则给出一个DRC错误。<br>&emsp;Dynamic Phase的应用举例来说。</p>
<div align="center"><br><img src="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-215.jpg" alt=""><br></div>

<p>&emsp;设定Tolerance为x mil，Dynamic Phase Max Length为y mil。则Dynamic Phase的功能在于保证整个差分对网络的误差不会超过x mil。如果在网络的某个点差分对的误差超过了x mil，则超过的部分必须在y mil以内补偿回来。<br>&emsp;补偿的形式可以通过蛇形线或者拐角进行实现。</p>
<h2 id="等长线的设置"><a href="#等长线的设置" class="headerlink" title="等长线的设置"></a>等长线的设置</h2><h3 id="等长线的定义"><a href="#等长线的定义" class="headerlink" title="等长线的定义"></a>等长线的定义</h3><p>&emsp;等长线的意义在于保证等长线组的长度或者延时误差在允许范围以内。例如在DDR布线过程中，需要保证数据线的等长以确保数据传输的准确性。</p>
<h3 id="等长线的设置-1"><a href="#等长线的设置-1" class="headerlink" title="等长线的设置"></a>等长线的设置</h3><p>&emsp;打开Constraint Manager，选择Electrical-Net-Routing；选择需要设置等长的网路，这里举例选择SPI的SCLK、DIN、SYNC网络（事实上SPI信号通常在50MHz以内，对等长的要求并不严格）。选中网络后，与设置差分线一样，右键选择Create-Match Group，命名为SPI即可。</p>
<h3 id="Allegro的设置"><a href="#Allegro的设置" class="headerlink" title="Allegro的设置"></a>Allegro的设置</h3><p>&emsp;在进行等长线设置之前，需要打开Allegro的相关设置。按照图打开如下2处设置，使得Allegro动态显示走线的长度以及差分线的误差。</p>
<div align="center"><br><img src="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-215.png" alt=""><br></div>

<div align="center"><br><img src="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-216.png" alt=""><br></div>

<h3 id="等长规则的设置"><a href="#等长规则的设置" class="headerlink" title="等长规则的设置"></a>等长规则的设置</h3><p>&emsp;设置Pin Pairs为Longest Pin Pairs，表示以最长的一条线为标准进行比对；设置Relative Delay为-40mil；40mil，代表误差在±40mil之间。此时，等长线组的走线长度木匾设置为Longest Pin Pair - 40mil，在此基础上误差为±40即为满足要求。<br>&emsp;按以上要求设置完毕后，选择等长线组，右键选择Analyse即可对等长线组进行分析，例如此时的分析结果如下：</p>
<div align="center"><br><img src="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-217.png" alt=""><br></div>

<p>&emsp;此时DIN为最长线，长度为755mil，可知此时的目标线长为755-40=715mil。目标线长减去40mil则为允许的最短线长，为675mil。对于SCLK，Margin为675-621=54mil，已经不满足要求；而SYNC的Margin为686-675=11，满足要求。因此SCLK需要调整。</p>
<h3 id="等长线的调整"><a href="#等长线的调整" class="headerlink" title="等长线的调整"></a>等长线的调整</h3><p>&emsp;等长线的调整可以通过Delay Tune实现，注意options选项中要设置Gap为3倍线宽，同时使用弧形线。经过绕线可以调整等长线到相近长度，此时Margin充足，满足要求。😄</p>
<div align="center"><br><img src="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-218.png" alt=""><br></div>

<div align="center"><br><img src="http://omcg8fk23.bkt.clouddn.com/blogs%5Callegro-guide-219.png" alt=""><br></div>



<p><img src="http://omcg8fk23.bkt.clouddn.com/Reward.jpg" alt=""></p>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2017/07/09/allegro-guide-2/">Allegro学习笔记-差分线与等长线</a></p>
        <p><span>文章作者:</span><a href="/" title="回到主页">焦迪</a></p>
        <p><span>发布时间:</span>2017-07-09, 12:30:00</p>
        <p><span>最后更新:</span>2018-03-15, 21:46:45</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2017/07/09/allegro-guide-2/" title="Allegro学习笔记-差分线与等长线">http://jiaodi.tech/2017/07/09/allegro-guide-2/</a>
            <span class="copy-path" data-clipboard-text="原文: http://jiaodi.tech/2017/07/09/allegro-guide-2/　　作者: 焦迪" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2017/11/16/myserial/">
                    使用C#构建一个串口程序
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2017/06/11/allegro-guide-1/">
                    Allegro学习笔记-基础篇
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">文章目录</strong>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Xnet的设置"><span class="toc-number">1.</span> <span class="toc-text">Xnet的设置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#差分线的设置"><span class="toc-number">2.</span> <span class="toc-text">差分线的设置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#差分线的定义"><span class="toc-number">2.1.</span> <span class="toc-text">差分线的定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#差分线对的设置"><span class="toc-number">2.2.</span> <span class="toc-text">差分线对的设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#差分线的规则设置"><span class="toc-number">2.3.</span> <span class="toc-text">差分线的规则设置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Coupling-Parameters"><span class="toc-number">2.3.1.</span> <span class="toc-text">Coupling Parameters</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Uncoupled-Length"><span class="toc-number">2.3.2.</span> <span class="toc-text">Uncoupled Length</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Static-Phase"><span class="toc-number">2.3.3.</span> <span class="toc-text">Static Phase</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Dynamic-Phase"><span class="toc-number">2.3.4.</span> <span class="toc-text">Dynamic Phase</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#等长线的设置"><span class="toc-number">3.</span> <span class="toc-text">等长线的设置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#等长线的定义"><span class="toc-number">3.1.</span> <span class="toc-text">等长线的定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#等长线的设置-1"><span class="toc-number">3.2.</span> <span class="toc-text">等长线的设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Allegro的设置"><span class="toc-number">3.3.</span> <span class="toc-text">Allegro的设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#等长规则的设置"><span class="toc-number">3.4.</span> <span class="toc-text">等长规则的设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#等长线的调整"><span class="toc-number">3.5.</span> <span class="toc-text">等长线的调整</span></a></li></ol></li></ol>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-3 i,
        .toc-level-3 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="隐藏目录"  title="点击按钮隐藏或者显示文章目录">

    <script>
        yiliaConfig.toc = ["隐藏目录", "显示目录", !!"false"];
    </script>





    
      <div class="duoshuo" id="comments">
    <div id="comment-box" ></div>
    <div class="ds-thread" id="ds-thread" data-thread-key="2017/07/09/allegro-guide-2/" data-title="Allegro学习笔记-差分线与等长线" data-url="http://jiaodi.tech/2017/07/09/allegro-guide-2/"></div>
    <script>
        var duoshuoQuery = {short_name:"null"};
        var loadComment = function(){
            var d = document, s = d.createElement('script');
            s.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
            s.async = true; s.charset = 'UTF-8';
            (d.head || d.body).appendChild(s);
        }

        
    </script>
    
    <script> loadComment(); </script>

</div>
    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2017/11/16/myserial/" title="上一篇: 使用C#构建一个串口程序">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2017/06/11/allegro-guide-1/" title="下一篇: Allegro学习笔记-基础篇">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/08/11/stm32f767-fmc-ad7616/">利用SMT32F767驱动AD7616</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/27/stm32f767-mpu/">STM32F767 MPU的基本用法</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/16/stm32f767-sdram/">STM32F767 FMC-SDRAM的基本用法</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/30/stm32f767-qspi/">STM32F767 QUADSPI的基本用法</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/27/stm32f767-flash/">STM32F767 Flash的基本用法</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/21/stm32f767-rtc/">STM32F767 RTC的基本用法</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/19/stm32f767-uart-dma/">STM32F767 DMA的基本用法</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/07/stm32f767-pwm/">STM32F767 PWM的基本用法</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/28/feedforward-cap/">优化前馈电容改善DCDC的瞬态响应(未完成)</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/25/stm32f767-wwdg/">STM32F767 WWDG的基本用法</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/21/stm32f767-iwdg/">STM32F767 IWDG的基本用法</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/16/stm32f767-timer/">STM32F767 Timer中断的基本用法</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/08/stm32f767-gpio-it/">STM32F767 GPIO中断的基本用法</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/05/stm32f767-GPIO-UART/">STM32F767 GPIO与UART的基本用法</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/29/stm32f767-delay/">STM32F767 delay函数的HAL库实现与优化</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/23/stm32f767-system/">STM32F767系统内核与时钟设置</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/18/stm32f767newpro/">新建一个STM32F767工程(基于HAL库)</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/17/stm32f767-start/">使用STM32CubeMX新建STM32F7工程</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/12/mlcc-noise/">电源应用中MLCC啸叫问题的分析与解决</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/04/pierce-oscillator/">Pierce振荡器的原理与设计方法</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/28/F28379D-new-pro-cpu1/">F28379D新建工程</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/23/python-pyinstaller/">PyInstaller基本用法</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/14/HDC1010-C2000/">使用F28069驱动温湿度传感器HDC1010</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/14/IEEEStd802-11/">IEEE Std 802.11a/g/n/ac</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/08/XDS100-VCP/">加载C2000 XDS100仿真器的虚拟串口(VCP)</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/06/MarkdownSyntax/">Markdown基本语法</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/21/BuckPowerStage/">Buck电路的功率部分设计</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/16/myserial/">使用C#构建一个串口程序</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/09/allegro-guide-2/">Allegro学习笔记-差分线与等长线</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/11/allegro-guide-1/">Allegro学习笔记-基础篇</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/04/cadence-allegro-package/">使用Ultra Librarian创建Cadence原理图与PCB封装</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/06/新建一个C2000工程/">新建一个C2000工程</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/06/安装CCS与controlSUITE/">安装CCS与controlSUITE</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2018 焦迪
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





    <script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>